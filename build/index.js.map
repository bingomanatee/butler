{"version":3,"sources":["webpack:///webpack/bootstrap 7bd2a5b6975891d6b37d","webpack:///./src/Service.js","webpack:///./src/index.js","webpack:///external \"eventemitter3\""],"names":["START_SERVICE","STOP_SERVICE","identity","args","Service","constructor","on","active","startService","emit","stopService","bridge","fromService","target","action","async","then","result","console","log","catch","err","message","enable","disable","off","trigger","method","callType","Error","targetArgs"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7bd2a5b6975891d6b37d","import EventEmitter from 'eventemitter3';\n\nexport const START_SERVICE = '___start_service';\n\nexport const STOP_SERVICE = '___stop_service';\n\nconst identity = (...args) => args;\n\nexport default class Service extends EventEmitter {\n  constructor() {\n    super();\n    this.on(START_SERVICE, () => {\n      this.active = true;\n    });\n\n    this.on(STOP_SERVICE, () => {\n      this.active = false;\n    });\n  }\n\n  startService() {\n    if (this.active) {\n      return;\n    }\n    this.emit(START_SERVICE);\n  }\n\n  stopService() {\n    if (!this.active) {\n      return;\n    }\n    this.emit(STOP_SERVICE);\n  }\n\n  bridge({\n    on, fromService = this, target = this,\n    emit, action = identity, async = false,\n  }) {\n    let bridge;\n\n    if (async) {\n      bridge = (...args) => action(...args)\n        .then((result) => {\n          console.log('async result: ', result);\n          target.emit(emit, result);\n        })\n        .catch(err => console.log(`error on ${on} >> ${emit}: ${err.message}`));\n    } else {\n      bridge = (...args) => target.emit(emit, action(...args));\n    }\n\n    const enable = () => fromService.on(on, bridge);\n    const disable = () => fromService.off(on, bridge);\n    this.on(START_SERVICE, enable);\n    this.on(STOP_SERVICE, disable);\n\n    if (this.active) enable();\n  }\n\n  trigger({\n    on, fromService = this, async = false,\n    target = this, method, callType = 'pass', action = identity,\n  }) {\n    let bridge;\n    if (!method) throw new Error('method missing on trigger');\n    switch (callType) {\n      case 'pass':\n        if (async) {\n          bridge = (...args) => action(...args)\n            .then(result => target[method](result));\n        } else {\n          bridge = (...args) => target[method](action(...args));\n        }\n\n        break;\n\n      case 'apply':\n        if (async) {\n          bridge = (...args) => action(...args)\n            .then((result) => {\n              console.log('async apply: ', result);\n              target[method](...result);\n            });\n        } else {\n          bridge = (...args) => {\n            const targetArgs = action(...args);\n            target[method](...targetArgs);\n          };\n        }\n\n        break;\n\n      default:\n        bridge = (...args) => target[method](action(...args));\n    }\n\n    const enable = () => fromService.on(on, bridge);\n    const disable = () => fromService.off(on, bridge);\n    this.on(START_SERVICE, enable);\n    this.on(STOP_SERVICE, disable);\n\n    if (this.active) enable();\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/Service.js","/* eslint-disable import/prefer-default-export */\n\nimport Service from './Service';\n\nexport { Service };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"eventemitter3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter3\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}