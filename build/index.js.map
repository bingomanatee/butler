{"version":3,"sources":["webpack:///webpack/bootstrap b6ab853f922e419a9632","webpack:///./src/Service.js","webpack:///./src/index.js","webpack:///external \"eventemitter3\""],"names":["START_SERVICE","STOP_SERVICE","identity","args","Service","constructor","on","active","startService","emit","stopService","bridge","fromService","toService","action","async","then","result","catch","err","console","log","message","enable","disable","off","trigger","target","method","callType","Error","actionValue"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b6ab853f922e419a9632","import EventEmitter from 'eventemitter3';\n\nexport const START_SERVICE = '___start_service';\n\nexport const STOP_SERVICE = '___stop_service';\n\nconst identity = (...args) => args;\n\nexport default class Service extends EventEmitter {\n  constructor() {\n    super();\n    this.on(START_SERVICE, () => {\n      this.active = true;\n    });\n\n    this.on(STOP_SERVICE, () => {\n      this.active = false;\n    });\n  }\n\n  startService() {\n    if (this.active) {\n      return;\n    }\n    this.emit(START_SERVICE);\n  }\n\n  stopService() {\n    if (!this.active) {\n      return;\n    }\n    this.emit(STOP_SERVICE);\n  }\n\n  bridge({\n    on, fromService = this, toService = this,\n    emit, action = identity, async = false,\n  }) {\n    let bridge;\n\n    if (async) {\n      bridge = (...args) => action(args)\n        .then(result => toService.emit(emit, result))\n        .catch(err => console.log(`error on ${on} >> ${emit}: ${err.message}`));\n    } else {\n      bridge = (...args) => toService.emit(emit, action(args));\n    }\n\n    const enable = () => fromService.on(on, bridge);\n    const disable = () => fromService.off(on, bridge);\n    this.on(START_SERVICE, enable);\n    this.on(STOP_SERVICE, disable);\n\n    if (this.active) enable();\n  }\n\n  trigger({\n    on, fromService = this, target = this, method, callType = 'pass', action = identity,\n  }) {\n    let bridge;\n    if (!method) throw new Error('method missing on trigger');\n    switch (callType) {\n      case 'pass':\n        bridge = (...args) => target[method](action(...args));\n        break;\n\n      case 'apply':\n        bridge = (...args) => {\n          const actionValue = action(args);\n          target[method](...actionValue);\n        };\n        break;\n\n      default:\n        bridge = (...args) => target[method](action(args));\n    }\n\n    const enable = () => fromService.on(on, bridge);\n    const disable = () => fromService.off(on, bridge);\n    this.on(START_SERVICE, enable);\n    this.on(STOP_SERVICE, disable);\n\n    if (this.active) enable();\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/Service.js","/* eslint-disable import/prefer-default-export */\n\nimport Service from './Service';\n\nexport { Service };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"eventemitter3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter3\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}